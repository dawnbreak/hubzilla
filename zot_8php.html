<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>The Hubzilla: include/zot.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rm-64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">The Hubzilla
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('zot_8php.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">zot.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="namespaceHubzilla.html">Hubzilla</a> implementation of zot protocol.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab22d67660702056bf3f4696dcebf5ce7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ab22d67660702056bf3f4696dcebf5ce7">zot_new_uid</a> ($channel_nick)</td></tr>
<tr class="memdesc:ab22d67660702056bf3f4696dcebf5ce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a unique string for use as a zot guid.  <a href="#ab22d67660702056bf3f4696dcebf5ce7">More...</a><br/></td></tr>
<tr class="separator:ab22d67660702056bf3f4696dcebf5ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc2211c5309d9f925ecc4115e3fdb75"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a0fc2211c5309d9f925ecc4115e3fdb75">make_xchan_hash</a> ($guid, $guid_sig)</td></tr>
<tr class="memdesc:a0fc2211c5309d9f925ecc4115e3fdb75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a portable hash identifier for a channel.  <a href="#a0fc2211c5309d9f925ecc4115e3fdb75">More...</a><br/></td></tr>
<tr class="separator:a0fc2211c5309d9f925ecc4115e3fdb75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7cec2b417b5858fd4a41070f843d1d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ae7cec2b417b5858fd4a41070f843d1d7">zot_get_hublocs</a> ($hash)</td></tr>
<tr class="memdesc:ae7cec2b417b5858fd4a41070f843d1d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a zot hash, return all distinct hubs.  <a href="#ae7cec2b417b5858fd4a41070f843d1d7">More...</a><br/></td></tr>
<tr class="separator:ae7cec2b417b5858fd4a41070f843d1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a095b39eeb730f699e222dd19d1e6e90e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a095b39eeb730f699e222dd19d1e6e90e">zot_build_packet</a> ($channel, $type= 'notify', $recipients=null, $remote_key=null, $methods= '', $secret=null, $extra=null)</td></tr>
<tr class="memdesc:a095b39eeb730f699e222dd19d1e6e90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a zot notification packet.  <a href="#a095b39eeb730f699e222dd19d1e6e90e">More...</a><br/></td></tr>
<tr class="separator:a095b39eeb730f699e222dd19d1e6e90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3b61a948ef560ac6eabeb0098a080d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a0f3b61a948ef560ac6eabeb0098a080d">zot_best_algorithm</a> ($methods)</td></tr>
<tr class="memdesc:a0f3b61a948ef560ac6eabeb0098a080d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose best encryption function from those available on both sites.  <a href="#a0f3b61a948ef560ac6eabeb0098a080d">More...</a><br/></td></tr>
<tr class="separator:a0f3b61a948ef560ac6eabeb0098a080d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e9b99ddb11353f37f265a05bb42142"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ab3e9b99ddb11353f37f265a05bb42142">zot_zot</a> ($url, $data)</td></tr>
<tr class="separator:ab3e9b99ddb11353f37f265a05bb42142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac30ff51274bf0b6d3eade37972145c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a7ac30ff51274bf0b6d3eade37972145c">zot_refresh</a> ($them, $channel=null, $force=false)</td></tr>
<tr class="memdesc:a7ac30ff51274bf0b6d3eade37972145c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refreshes after permission changed or friending, etc.  <a href="#a7ac30ff51274bf0b6d3eade37972145c">More...</a><br/></td></tr>
<tr class="separator:a7ac30ff51274bf0b6d3eade37972145c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf10e76aab0953cdd198d51270191c54"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#acf10e76aab0953cdd198d51270191c54">zot_gethub</a> ($arr, $multiple=false)</td></tr>
<tr class="memdesc:acf10e76aab0953cdd198d51270191c54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up if channel is known and previously verified.  <a href="#acf10e76aab0953cdd198d51270191c54">More...</a><br/></td></tr>
<tr class="separator:acf10e76aab0953cdd198d51270191c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcdfef419b16075a0eca990956223dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a5bcdfef419b16075a0eca990956223dc">zot_register_hub</a> ($arr)</td></tr>
<tr class="memdesc:a5bcdfef419b16075a0eca990956223dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers an unknown hub.  <a href="#a5bcdfef419b16075a0eca990956223dc">More...</a><br/></td></tr>
<tr class="separator:a5bcdfef419b16075a0eca990956223dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528e97ca5d69c3b7f35c5d954afde315"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a528e97ca5d69c3b7f35c5d954afde315">import_xchan</a> ($arr, $ud_flags=<a class="el" href="boot_8php.html#a9690d73434125ce594a1f5e7c2a4f7c0">UPDATE_FLAGS_UPDATED</a>, $ud_arr=null)</td></tr>
<tr class="memdesc:a528e97ca5d69c3b7f35c5d954afde315"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes an associative array of a fetched discovery packet and updates all internal data structures which need to be updated as a result.  <a href="#a528e97ca5d69c3b7f35c5d954afde315">More...</a><br/></td></tr>
<tr class="separator:a528e97ca5d69c3b7f35c5d954afde315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928f5643ca66ae9635d85aeb2be62e03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a928f5643ca66ae9635d85aeb2be62e03">zot_process_response</a> ($hub, $arr, $outq)</td></tr>
<tr class="memdesc:a928f5643ca66ae9635d85aeb2be62e03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called immediately after sending a zot message which is using queue processing.  <a href="#a928f5643ca66ae9635d85aeb2be62e03">More...</a><br/></td></tr>
<tr class="separator:a928f5643ca66ae9635d85aeb2be62e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61cdc1ec843663c423ed2d8160ae5aea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a61cdc1ec843663c423ed2d8160ae5aea">zot_fetch</a> ($arr)</td></tr>
<tr class="memdesc:a61cdc1ec843663c423ed2d8160ae5aea"><td class="mdescLeft">&#160;</td><td class="mdescRight">We received a notification packet (in mod_post) that a message is waiting for us, and we've verified the sender. Now send back a pickup message, using our message tracking ID ($arr['secret']), which we will sign with our site private key. The entire pickup message is encrypted with the remote site's public key. If everything checks out on the remote end, we will receive back a packet containing one or more messages, which will be processed and delivered before this function ultimately returns.  <a href="#a61cdc1ec843663c423ed2d8160ae5aea">More...</a><br/></td></tr>
<tr class="separator:a61cdc1ec843663c423ed2d8160ae5aea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea071f17e306fe3d0c488551906bfab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import</a> ($arr, $sender_url)</td></tr>
<tr class="memdesc:aeea071f17e306fe3d0c488551906bfab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process incoming array of messages.  <a href="#aeea071f17e306fe3d0c488551906bfab">More...</a><br/></td></tr>
<tr class="separator:aeea071f17e306fe3d0c488551906bfab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a083aec6c900d244e1bfc1406f9461465"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a083aec6c900d244e1bfc1406f9461465">public_recips</a> ($msg)</td></tr>
<tr class="memdesc:a083aec6c900d244e1bfc1406f9461465"><td class="mdescLeft">&#160;</td><td class="mdescRight">A public message with no listed recipients can be delivered to anybody who has PERMS_NETWORK for that type of post, PERMS_AUTHED (in-network senders are by definition authenticated) or PERMS_SITE and is one the same site, or PERMS_SPECIFIC and the sender is a contact who is granted permissions via their connection permissions in the address book. Here we take a given message and construct a list of hashes of everybody on the site that we should try and deliver to. Some of these will be rejected, but this gives us a place to start.  <a href="#a083aec6c900d244e1bfc1406f9461465">More...</a><br/></td></tr>
<tr class="separator:a083aec6c900d244e1bfc1406f9461465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703f528ade8382cf374e4119bd6f7859"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a703f528ade8382cf374e4119bd6f7859">allowed_public_recips</a> ($msg)</td></tr>
<tr class="memdesc:a703f528ade8382cf374e4119bd6f7859"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the second part of <a class="el" href="zot_8php.html#a083aec6c900d244e1bfc1406f9461465" title="A public message with no listed recipients can be delivered to anybody who has PERMS_NETWORK for that...">public_recips()</a>.  <a href="#a703f528ade8382cf374e4119bd6f7859">More...</a><br/></td></tr>
<tr class="separator:a703f528ade8382cf374e4119bd6f7859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e3006e7a456b2175a9badc96bc5176d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a0e3006e7a456b2175a9badc96bc5176d">process_delivery</a> ($sender, $arr, $deliveries, $relay, $public=false, $request=false)</td></tr>
<tr class="separator:a0e3006e7a456b2175a9badc96bc5176d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad25a3fe0e1566121d6fb8222979bc10"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#aad25a3fe0e1566121d6fb8222979bc10">remove_community_tag</a> ($sender, $arr, $uid)</td></tr>
<tr class="memdesc:aad25a3fe0e1566121d6fb8222979bc10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove community tag.  <a href="#aad25a3fe0e1566121d6fb8222979bc10">More...</a><br/></td></tr>
<tr class="separator:aad25a3fe0e1566121d6fb8222979bc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff0d5f1ef6584866fb563d09de87b65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a5ff0d5f1ef6584866fb563d09de87b65">update_imported_item</a> ($sender, $item, $orig, $uid, $tag_delivery)</td></tr>
<tr class="memdesc:a5ff0d5f1ef6584866fb563d09de87b65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an imported item.  <a href="#a5ff0d5f1ef6584866fb563d09de87b65">More...</a><br/></td></tr>
<tr class="separator:a5ff0d5f1ef6584866fb563d09de87b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bcda2dd23975087f3627eb72fb6792b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a2bcda2dd23975087f3627eb72fb6792b">delete_imported_item</a> ($sender, $item, $uid, $relay)</td></tr>
<tr class="memdesc:a2bcda2dd23975087f3627eb72fb6792b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an imported item.  <a href="#a2bcda2dd23975087f3627eb72fb6792b">More...</a><br/></td></tr>
<tr class="separator:a2bcda2dd23975087f3627eb72fb6792b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ae96db8cbbdbb10e6876d206bbf7cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#aa6ae96db8cbbdbb10e6876d206bbf7cc">process_mail_delivery</a> ($sender, $arr, $deliveries)</td></tr>
<tr class="separator:aa6ae96db8cbbdbb10e6876d206bbf7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab718f7ab0df9c4153037d1a3f2613181"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ab718f7ab0df9c4153037d1a3f2613181">process_rating_delivery</a> ($sender, $arr)</td></tr>
<tr class="memdesc:ab718f7ab0df9c4153037d1a3f2613181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes delivery of rating.  <a href="#ab718f7ab0df9c4153037d1a3f2613181">More...</a><br/></td></tr>
<tr class="separator:ab718f7ab0df9c4153037d1a3f2613181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a57b40669351c9791126b925cb7ef3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a9a57b40669351c9791126b925cb7ef3b">process_profile_delivery</a> ($sender, $arr, $deliveries)</td></tr>
<tr class="memdesc:a9a57b40669351c9791126b925cb7ef3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes delivery of profile.  <a href="#a9a57b40669351c9791126b925cb7ef3b">More...</a><br/></td></tr>
<tr class="separator:a9a57b40669351c9791126b925cb7ef3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eeefdb0dad4c436bea9d1c06c0a7988"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a8eeefdb0dad4c436bea9d1c06c0a7988">process_location_delivery</a> ($sender, $arr, $deliveries)</td></tr>
<tr class="separator:a8eeefdb0dad4c436bea9d1c06c0a7988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ac7dc5a9aba529dff47c8e19ef7b76a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a2ac7dc5a9aba529dff47c8e19ef7b76a">check_location_move</a> ($sender_hash, $locations)</td></tr>
<tr class="memdesc:a2ac7dc5a9aba529dff47c8e19ef7b76a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for a moved UNO channel and sets the channel_moved flag.  <a href="#a2ac7dc5a9aba529dff47c8e19ef7b76a">More...</a><br/></td></tr>
<tr class="separator:a2ac7dc5a9aba529dff47c8e19ef7b76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab15c04e7e5f44edf45ec50dd7d183254"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ab15c04e7e5f44edf45ec50dd7d183254">sync_locations</a> ($sender, $arr, $absolute=false)</td></tr>
<tr class="memdesc:ab15c04e7e5f44edf45ec50dd7d183254"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronises locations.  <a href="#ab15c04e7e5f44edf45ec50dd7d183254">More...</a><br/></td></tr>
<tr class="separator:ab15c04e7e5f44edf45ec50dd7d183254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae26ce9f1ad74139193fb6319beac5fca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ae26ce9f1ad74139193fb6319beac5fca">zot_encode_locations</a> ($channel)</td></tr>
<tr class="memdesc:ae26ce9f1ad74139193fb6319beac5fca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an array with all known distinct hubs for this channel.  <a href="#ae26ce9f1ad74139193fb6319beac5fca">More...</a><br/></td></tr>
<tr class="separator:ae26ce9f1ad74139193fb6319beac5fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20750dd2c36961013fd382fb34e1366c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a20750dd2c36961013fd382fb34e1366c">import_directory_profile</a> ($hash, $profile, $addr, $ud_flags=<a class="el" href="boot_8php.html#a9690d73434125ce594a1f5e7c2a4f7c0">UPDATE_FLAGS_UPDATED</a>, $suppress_update=0)</td></tr>
<tr class="memdesc:a20750dd2c36961013fd382fb34e1366c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imports a directory profile.  <a href="#a20750dd2c36961013fd382fb34e1366c">More...</a><br/></td></tr>
<tr class="separator:a20750dd2c36961013fd382fb34e1366c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf11286c2619b4ca28e49d5b5ab374a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a3bf11286c2619b4ca28e49d5b5ab374a">import_directory_keywords</a> ($hash, $keywords)</td></tr>
<tr class="separator:a3bf11286c2619b4ca28e49d5b5ab374a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab319d1d9fff9c7775d9daef42d1f33dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ab319d1d9fff9c7775d9daef42d1f33dd">update_modtime</a> ($hash, $guid, $addr, $flags=0)</td></tr>
<tr class="separator:ab319d1d9fff9c7775d9daef42d1f33dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2657e141d62d5f67ad3c87651b585299"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a2657e141d62d5f67ad3c87651b585299">import_site</a> ($arr, $pubkey)</td></tr>
<tr class="separator:a2657e141d62d5f67ad3c87651b585299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97b33b619dd7132a9274f852af6ceb5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#aa97b33b619dd7132a9274f852af6ceb5">build_sync_packet</a> ($uid=0, $packet=null, $groups_changed=false)</td></tr>
<tr class="memdesc:aa97b33b619dd7132a9274f852af6ceb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds and sends a sync packet.  <a href="#aa97b33b619dd7132a9274f852af6ceb5">More...</a><br/></td></tr>
<tr class="separator:aa97b33b619dd7132a9274f852af6ceb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac301c67864917c35922257950ae0f95c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ac301c67864917c35922257950ae0f95c">process_channel_sync_delivery</a> ($sender, $arr, $deliveries)</td></tr>
<tr class="separator:ac301c67864917c35922257950ae0f95c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e22dbc6f884be3644a892a876cbd972"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a8e22dbc6f884be3644a892a876cbd972">get_rpost_path</a> ($observer)</td></tr>
<tr class="memdesc:a8e22dbc6f884be3644a892a876cbd972"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns path to /rpost.  <a href="#a8e22dbc6f884be3644a892a876cbd972">More...</a><br/></td></tr>
<tr class="separator:a8e22dbc6f884be3644a892a876cbd972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad149f1e98c0c5b88ff9147e6ee3f330d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ad149f1e98c0c5b88ff9147e6ee3f330d">import_author_zot</a> ($<a class="el" href="boot_8php.html#ae97836b0547953be182a2334c9c91d3c">x</a>)</td></tr>
<tr class="separator:ad149f1e98c0c5b88ff9147e6ee3f330d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61cdd945f818854c4cea688ae2430713"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a61cdd945f818854c4cea688ae2430713">zot_reply_message_request</a> ($data)</td></tr>
<tr class="memdesc:a61cdd945f818854c4cea688ae2430713"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a message request.  <a href="#a61cdd945f818854c4cea688ae2430713">More...</a><br/></td></tr>
<tr class="separator:a61cdd945f818854c4cea688ae2430713"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60d9c66d9f5d62fadf50571b3d6bc0c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a60d9c66d9f5d62fadf50571b3d6bc0c7">zot_rekey_request</a> ($sender, $data)</td></tr>
<tr class="separator:a60d9c66d9f5d62fadf50571b3d6bc0c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0864b60cb55a5f70278222f23ed9372"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#af0864b60cb55a5f70278222f23ed9372">zotinfo</a> ($arr)</td></tr>
<tr class="separator:af0864b60cb55a5f70278222f23ed9372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12373a9b4df897b5cbedce6e6572bd34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a12373a9b4df897b5cbedce6e6572bd34">zot_site_info</a> ($channel_key= '')</td></tr>
<tr class="separator:a12373a9b4df897b5cbedce6e6572bd34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15ea2cf25dbc7eaf68d32f4e9c6efba1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a15ea2cf25dbc7eaf68d32f4e9c6efba1">check_zotinfo</a> ($channel, $locations, &amp;$ret)</td></tr>
<tr class="separator:a15ea2cf25dbc7eaf68d32f4e9c6efba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438ee175ea6a50b185bbae44a6afdd3f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a438ee175ea6a50b185bbae44a6afdd3f">delivery_report_is_storable</a> ($dr)</td></tr>
<tr class="separator:a438ee175ea6a50b185bbae44a6afdd3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adedf8f786f520187ad910183335d9ad8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#adedf8f786f520187ad910183335d9ad8">update_hub_connected</a> ($hub, $sitekey= '')</td></tr>
<tr class="separator:adedf8f786f520187ad910183335d9ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10643d70f8e7fe6518971636aa79b43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#af10643d70f8e7fe6518971636aa79b43">zot_reply_ping</a> ()</td></tr>
<tr class="memdesc:af10643d70f8e7fe6518971636aa79b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Useful to get a health check on a remote site.  <a href="#af10643d70f8e7fe6518971636aa79b43">More...</a><br/></td></tr>
<tr class="separator:af10643d70f8e7fe6518971636aa79b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3401111563050894aecff3139093ae69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a3401111563050894aecff3139093ae69">zot_reply_pickup</a> ($data)</td></tr>
<tr class="separator:a3401111563050894aecff3139093ae69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53507a254a401e1319f3c18f5a68afad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a53507a254a401e1319f3c18f5a68afad">zot_reply_auth_check</a> ($data, $encrypted_packet)</td></tr>
<tr class="separator:a53507a254a401e1319f3c18f5a68afad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae338fcd6db6461a6dde5e4e8f734e0f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#ae338fcd6db6461a6dde5e4e8f734e0f2">zot_reply_purge</a> ($sender, $recipients)</td></tr>
<tr class="separator:ae338fcd6db6461a6dde5e4e8f734e0f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f977190f0ac305fddb406920494f1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#a42f977190f0ac305fddb406920494f1a">zot_reply_refresh</a> ($sender, $recipients)</td></tr>
<tr class="memdesc:a42f977190f0ac305fddb406920494f1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remote channel info (such as permissions or photo or something) has been updated. Grab a fresh copy and sync it.  <a href="#a42f977190f0ac305fddb406920494f1a">More...</a><br/></td></tr>
<tr class="separator:a42f977190f0ac305fddb406920494f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa454ca2107ab478d0f05924239a7d120"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zot_8php.html#aa454ca2107ab478d0f05924239a7d120">zot_reply_notify</a> ($data)</td></tr>
<tr class="separator:aa454ca2107ab478d0f05924239a7d120"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="namespaceHubzilla.html">Hubzilla</a> implementation of zot protocol. </p>
<p><a href="https://github.com/friendica/red/wiki/zot">https://github.com/friendica/red/wiki/zot</a> <a href="https://github.com/friendica/red/wiki/Zot&mdash;A-High-Level-Overview">https://github.com/friendica/red/wiki/Zot&amp;mdash;A-High-Level-Overview</a> </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a703f528ade8382cf374e4119bd6f7859"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">allowed_public_recips </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the second part of <a class="el" href="zot_8php.html#a083aec6c900d244e1bfc1406f9461465" title="A public message with no listed recipients can be delivered to anybody who has PERMS_NETWORK for that...">public_recips()</a>. </p>
<p>We'll find all the channels willing to accept public posts from us, then match them against the sender privacy scope and see who in that list that the sender is allowing.</p>
<dl class="section see"><dt>See Also</dt><dd>public_recipes() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$msg</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="aa97b33b619dd7132a9274f852af6ceb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">build_sync_packet </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uid</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$packet</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$groups_changed</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds and sends a sync packet. </p>
<p>Send a zot packet to all hubs where this channel is duplicated, refreshing such things as personal settings, channel permissions, address book updates, etc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$uid</td><td>(optional) default 0 </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$packet</td><td>(optional) default null </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$groups_changed</td><td>(optional) default false </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Lib_1_1Apps.html#a34aa3bf120158693ed2441cabc5d51c6">Zotlabs\Lib\Apps\app_destroy()</a>, <a class="el" href="classZotlabs_1_1Lib_1_1Apps.html#ae0e89e20a87c4e126199b62066800c96">Zotlabs\Lib\Apps\app_install()</a>, <a class="el" href="attach_8php.html#a97caa53317213377dac8b95631a284b3">attach_change_permissions()</a>, <a class="el" href="attach_8php.html#a84a8a64c4805e1525b42d4add464833f">attach_store()</a>, <a class="el" href="channel_8php.html#af1a03a7cadde6ae7e82cddd965e8ebbf">change_channel_keys()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Connedit.html#aec147f58af3ab6a3a9f064c0f5f86a54">Zotlabs\Module\Connedit\connedit_clone()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Defperms.html#a2203fceeff942a5832b7a705b33eca43">Zotlabs\Module\Defperms\defperms_clone()</a>, <a class="el" href="classZotlabs_1_1Lib_1_1Chatroom.html#aacd5587851174f8d3ba185b980414b8c">Zotlabs\Lib\Chatroom\destroy()</a>, <a class="el" href="event_8php.html#ac9f206819186b65952ac1869f0da8c6e">event_addtocal()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Moderate.html#a4a466616da1a2e91d4dac940b83fd211">Zotlabs\Module\Moderate\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Like.html#ae7eeecd6ab1529667ba8fe44ac431df5">Zotlabs\Module\Like\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Tagger.html#a3ac4dc2356d975421bc2b2c2dd7f8dd2">Zotlabs\Module\Tagger\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Settings_1_1Permcats.html#abb8a0abf3e1df07d7ff04948c0e12f72">Zotlabs\Module\Settings\Permcats\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Filestorage.html#a15e688a16894866833acf5cd26577270">Zotlabs\Module\Filestorage\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Mail.html#a0a2eb2bbc1d3846647e92f058e61e3f4">Zotlabs\Module\Mail\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Thing.html#ae73a36f760a40046a7871a90a08108bf">Zotlabs\Module\Thing\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Events.html#ab1e9e1f571d25ddd63e7ba447c5b4a73">Zotlabs\Module\Events\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Profile__photo.html#a0f5521c97fcfc46cd1a0de6312baed03">Zotlabs\Module\Profile_photo\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Connedit.html#a7a711b28c6bbf17db234921053af0987">Zotlabs\Module\Connedit\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Item.html#a0081aeac1c38503c51dc3718d2f57a64">Zotlabs\Module\Item\get()</a>, <a class="el" href="group_8php.html#a06ec565d2b64e79044e7c1bf91a2a4ce">group_add()</a>, <a class="el" href="group_8php.html#a0122ef312df2c5546b1a46b3e6c7b31b">group_add_member()</a>, <a class="el" href="group_8php.html#a4118f498bbd1530c1d0136d016d197a5">group_rmv()</a>, <a class="el" href="group_8php.html#a540e3ef36f47d47532646be4241f6518">group_rmv_member()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Notes.html#a5fba52d55da95f5ebdba37695ab7680e">Zotlabs\Module\Notes\init()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Starred.html#a6a7ac2b3002d4aab79440ba8e26935f7">Zotlabs\Module\Starred\init()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Follow.html#a8a1d8e6e49b76daa38def982fe38ee5c">Zotlabs\Module\Follow\init()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Thing.html#afa67f3f8ac62b4f25ecbbe42bb6f7af9">Zotlabs\Module\Thing\init()</a>, <a class="el" href="items_8php.html#a3fea190461761dbb46f6c8f90078e99d">item_create_edit_activity()</a>, <a class="el" href="menu_8php.html#aad150370de1f14607551bdfece74635b">menu_sync_packet()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Pdledit.html#ad7862b100531ca4ab321d9f4f87b4c96">Zotlabs\Module\Pdledit\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Settings_1_1Features.html#a571e1d5158b8b313abc36b464b36228e">Zotlabs\Module\Settings\Features\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Settings_1_1Featured.html#a6316ba4ed66e9450f9fed4451caae025">Zotlabs\Module\Settings\Featured\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Settings_1_1Permcats.html#ae5f5dfcb06b0d29472641a9de1761165">Zotlabs\Module\Settings\Permcats\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Group.html#a831a9ea950e8e42cb9c8dc9cf53a06e2">Zotlabs\Module\Group\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Pconfig.html#a28fbd50fbf207e89f85f9a0a27ae2ae4">Zotlabs\Module\Pconfig\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Settings_1_1Channel.html#aaa76531a482a35d2e13c0093d97d0143">Zotlabs\Module\Settings\Channel\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1File__upload.html#a5b1c21449dd5faae85f68ff1038c8d63">Zotlabs\Module\File_upload\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Settings_1_1Display.html#a57b8e2395271135b473cae8ffe328e1f">Zotlabs\Module\Settings\Display\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Events.html#aa300872df8ec511c03fefa69dcf4e89a">Zotlabs\Module\Events\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Mail.html#a7bc799bf364fc7986da6566618899c3e">Zotlabs\Module\Mail\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Wall__attach.html#a40b935fa19f0fad3724202167c3d8536">Zotlabs\Module\Wall_attach\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Item.html#add2495ae77a351158ab92566298dce29">Zotlabs\Module\Item\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Chat.html#afce3df84504d3ddebb81d7c5bc58243b">Zotlabs\Module\Chat\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Profile__photo.html#abb1cfd520e0afa9cdf7c2ca0e9836883">Zotlabs\Module\Profile_photo\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Photos.html#a29612aeb73997a308f89d945acd117c5">Zotlabs\Module\Photos\post()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Profiles.html#a9d5d6f1f57ac44210d1c2263e85690ff">Zotlabs\Module\Profiles\post()</a>, <a class="el" href="message_8php.html#aed272d77c06a309e2836ac79e75613f1">private_messages_drop()</a>, <a class="el" href="channel_8php.html#a6f88a825bbd4e2ce61989744d6b80d58">profiles_build_sync()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Importfile.html#a328cc21f76e43b7a6856f61372b3cc6b">Zotlabs\Daemon\Importfile\run()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Cron.html#a8158c89c74ddb9f5f129ff0edb801887">Zotlabs\Daemon\Cron\run()</a>, <a class="el" href="classZotlabs_1_1Lib_1_1NativeWiki.html#a12baf0612eab11acf220ecc178dc5e62">Zotlabs\Lib\NativeWiki\sync_a_wiki_item()</a>, <a class="el" href="items_8php.html#ae980bbf5f8a5f2c3f10266b3d7d4acc7">sync_an_item()</a>, and <a class="el" href="zot_8php.html#a7ac30ff51274bf0b6d3eade37972145c">zot_refresh()</a>.</p>

</div>
</div>
<a class="anchor" id="a2ac7dc5a9aba529dff47c8e19ef7b76a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">check_location_move </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for a moved UNO channel and sets the channel_moved flag. </p>
<p>Currently the effect of this flag is to turn the channel into 'read-only' mode. New content will not be processed (there was still an issue with blocking the ability to post comments as of 10-Mar-2016). We do not physically remove the channel at this time. The hub admin may choose to do so, but is encouraged to allow a grace period of several days in case there are any issues migrating content. This packet will generally be received by the original site when the basic channel import has been processed.</p>
<p>This will only be executed on the UNO system which is the old location if a new location is reported and there is only one location record. The rest of the hubloc syncronisation will be handled within sync_locations</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sender_hash</td><td>A channel hash </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$locations</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000075">Hooks:</a></b></dt><dd>location_move Called when a new location has been provided to a UNO channel (indicating a move rather than a clone).<ul>
<li><em>array</em> <b>channel</b> </li>
<li><em>array</em> <b>locations</b> </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#ab15c04e7e5f44edf45ec50dd7d183254">sync_locations()</a>.</p>

</div>
</div>
<a class="anchor" id="a15ea2cf25dbc7eaf68d32f4e9c6efba1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">check_zotinfo </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$locations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramtype">array</td><td class="paramname">$channel</td><td></td></tr>
    <tr><td class="paramdir"></td><td class="paramtype">array</td><td class="paramname">$locations</td><td></td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramtype">array</td><td class="paramname">$ret</td><td><em>array</em> <b>locations</b> result of <a class="el" href="zot_8php.html#ae26ce9f1ad74139193fb6319beac5fca" title="Returns an array with all known distinct hubs for this channel. ">zot_encode_locations()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="fixme"><dt><b><a class="el" href="fixme.html#_fixme000020">Fixme:</a></b></dt><dd>ensure that the system channel exists in the first place and has an xchan </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#af0864b60cb55a5f70278222f23ed9372">zotinfo()</a>.</p>

</div>
</div>
<a class="anchor" id="a2bcda2dd23975087f3627eb72fb6792b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delete_imported_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an imported item. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td><ul>
<li><em>string</em> <b>hash</b> a xchan_hash </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$item</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$uid</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$relay</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean|int post_id </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a0e3006e7a456b2175a9badc96bc5176d">process_delivery()</a>.</p>

</div>
</div>
<a class="anchor" id="a438ee175ea6a50b185bbae44a6afdd3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delivery_report_is_storable </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$dr</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000080">Hooks:</a></b></dt><dd>dreport_is_storable Called before storing a dreport record to determine whether to store it.<ul>
<li><em>array</em> </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Daemon_1_1Deliver.html#a214e2327d61f169f971e4fe3697bc9a7">Zotlabs\Daemon\Deliver\run()</a>, and <a class="el" href="zot_8php.html#a928f5643ca66ae9635d85aeb2be62e03">zot_process_response()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e22dbc6f884be3644a892a876cbd972"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_rpost_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$observer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns path to /rpost. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000019">Todo:</a></b></dt><dd>We probably should make rpost discoverable.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$observer</td><td><ul>
<li><em>string</em> <b>xchan_url</b> </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Module_1_1Rpost.html#a2d3cca96b8d9f4a59ae72e7a836c94bb">Zotlabs\Module\Rpost\get()</a>.</p>

</div>
</div>
<a class="anchor" id="ad149f1e98c0c5b88ff9147e6ee3f330d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">import_author_zot </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$x</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean|string return false or a hash </dd></dl>

<p>Referenced by <a class="el" href="items_8php.html#ae73794179b62d39bb597ff670ab1c1e5">import_author_xchan()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bf11286c2619b4ca28e49d5b5ab374a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">import_directory_keywords </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$keywords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hash</td><td>An xtag_hash </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$keywords</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#a20750dd2c36961013fd382fb34e1366c">import_directory_profile()</a>.</p>

</div>
</div>
<a class="anchor" id="a20750dd2c36961013fd382fb34e1366c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">import_directory_profile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$profile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ud_flags</em> = <code><a class="el" href="boot_8php.html#a9690d73434125ce594a1f5e7c2a4f7c0">UPDATE_FLAGS_UPDATED</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$suppress_update</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Imports a directory profile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hash</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$profile</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$addr</td><td></td></tr>
    <tr><td class="paramtype">number</td><td class="paramname">$ud_flags</td><td>(optional) UPDATE_FLAGS_UPDATED </td></tr>
    <tr><td class="paramtype">number</td><td class="paramname">$suppress_update</td><td>(optional) default 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean $updated if something changed </dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000076">Hooks:</a></b></dt><dd>import_directory_profile Called when processing delivery of a profile structure from an external source (usually for directory storage).<ul>
<li><em>array</em> <b>xprof</b> </li>
<li><em>array</em> <b>profile</b> </li>
<li><em>boolean</em> <b>update</b> </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a528e97ca5d69c3b7f35c5d954afde315">import_xchan()</a>, <a class="el" href="dir__fns_8php.html#acd37b17dce3bdec6d5a6344a20598c1e">local_dir_update()</a>, and <a class="el" href="zot_8php.html#a9a57b40669351c9791126b925cb7ef3b">process_profile_delivery()</a>.</p>

</div>
</div>
<a class="anchor" id="a2657e141d62d5f67ad3c87651b585299"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">import_site </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pubkey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pubkey</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean true if updated or inserted </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a528e97ca5d69c3b7f35c5d954afde315">import_xchan()</a>.</p>

</div>
</div>
<a class="anchor" id="a528e97ca5d69c3b7f35c5d954afde315"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">import_xchan </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ud_flags</em> = <code><a class="el" href="boot_8php.html#a9690d73434125ce594a1f5e7c2a4f7c0">UPDATE_FLAGS_UPDATED</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ud_arr</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes an associative array of a fetched discovery packet and updates all internal data structures which need to be updated as a result. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>=&gt; json_decoded discovery packet </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$ud_flags</td><td>Determines whether to create a directory update record if any changes occur, default is UPDATE_FLAGS_UPDATED $ud_flags = UPDATE_FLAGS_FORCED indicates a forced refresh where we unconditionally create a directory update record this typically occurs once a month for each channel as part of a scheduled ping to notify the directory that the channel still exists </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$ud_arr</td><td>If set [typically by <a class="el" href="dir__fns_8php.html#a44062d4b471d1e83f92f6c184585aa13" title="Given an update record, probe the channel, grab a zot-info packet and refresh/sync the data...">update_directory_entry()</a>] indicates a specific update table row and more particularly contains a particular address (ud_addr) which needs to be updated in that table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An associative array with:<ul>
<li><em>boolean</em> <b>success</b> boolean true or false</li>
<li><em>string</em> <b>message</b> (optional) error string only if success is false </li>
</ul>
</dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000072">Hooks:</a></b></dt><dd>import_xchan Called when processing the result of zot_finger() to store the result<ul>
<li><em>array</em> </li>
</ul>
</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000017">Todo:</a></b></dt><dd>: check if we're the same directory realm, which would mean we are allowed to see it </dd></dl>

<p>Referenced by <a class="el" href="network_8php.html#aa4e7597280851a1b5cc37d5ebd19ec3a">discover_by_webbie()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Chanview.html#ab2c222b7d6a40527aefbc155821e855c">Zotlabs\Module\Chanview\get()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Probe.html#a78e8af532d0b8e66218ad5e2365e55ee">Zotlabs\Module\Probe\get()</a>, <a class="el" href="classZotlabs_1_1Zot_1_1Auth.html#a7f6c51a423364ee8c5ef25732b9da074">Zotlabs\Zot\Auth\GetHublocs()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Magic.html#a602dc2ff8d5cd298205ab4b1819eba8d">Zotlabs\Module\Magic\init()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Regdir.html#ad5a67e7955c768c18d04f12dec7ebd31">Zotlabs\Module\Regdir\init()</a>, <a class="el" href="follow_8php.html#ae387d4ae097c23d69f3247e7f08140c7">new_contact()</a>, <a class="el" href="zid_8php.html#a95737da27197c792bd9565a8a67f7b05">owt_init()</a>, <a class="el" href="socgraph_8php.html#a5ef8bef37161df53718a21e93d02fbd6">poco_load()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Mail.html#a7bc799bf364fc7986da6566618899c3e">Zotlabs\Module\Mail\post()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Gprobe.html#a744294d72ebe58b617538b7121b60bb3">Zotlabs\Daemon\Gprobe\run()</a>, <a class="el" href="dir__fns_8php.html#a44062d4b471d1e83f92f6c184585aa13">update_directory_entry()</a>, <a class="el" href="zot_8php.html#a7ac30ff51274bf0b6d3eade37972145c">zot_refresh()</a>, and <a class="el" href="zot_8php.html#a5bcdfef419b16075a0eca990956223dc">zot_register_hub()</a>.</p>

</div>
</div>
<a class="anchor" id="a0fc2211c5309d9f925ecc4115e3fdb75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">make_xchan_hash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_sig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a portable hash identifier for a channel. </p>
<p>Generates a portable hash identifier for the channel identified by $guid and signed with $guid_sig.</p>
<dl class="section note"><dt>Note</dt><dd>This ID is portable across the network but MUST be calculated locally by verifying the signature and can not be trusted as an identity.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$guid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$guid_sig</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#a703f528ade8382cf374e4119bd6f7859">allowed_public_recips()</a>, <a class="el" href="channel_8php.html#af1a03a7cadde6ae7e82cddd965e8ebbf">change_channel_keys()</a>, <a class="el" href="channel_8php.html#a345f4c943d84de502ec6e72d2c813945">create_identity()</a>, <a class="el" href="items_8php.html#a3b35b97a9c10ad3f3f13cd0fca8ffcab">get_item_elements()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Import.html#ab464f42309ef33a89bf4b024cf2568df">Zotlabs\Module\Import\import_account()</a>, <a class="el" href="zot_8php.html#ad149f1e98c0c5b88ff9147e6ee3f330d">import_author_zot()</a>, <a class="el" href="import_8php.html#a5d1dd46b9c38e854f9cd3a15bf29595c">import_channel()</a>, <a class="el" href="import_8php.html#a77e5c2788a512442f9842ac8dec0465b">import_hublocs()</a>, <a class="el" href="zot_8php.html#a528e97ca5d69c3b7f35c5d954afde315">import_xchan()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Zfinger.html#a72176c25e6af11e5b4f5855e61eb1905">Zotlabs\Module\Zfinger\init()</a>, <a class="el" href="zot_8php.html#ac301c67864917c35922257950ae0f95c">process_channel_sync_delivery()</a>, <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>, <a class="el" href="zot_8php.html#a5bcdfef419b16075a0eca990956223dc">zot_register_hub()</a>, <a class="el" href="zot_8php.html#a60d9c66d9f5d62fadf50571b3d6bc0c7">zot_rekey_request()</a>, <a class="el" href="zot_8php.html#a53507a254a401e1319f3c18f5a68afad">zot_reply_auth_check()</a>, <a class="el" href="zot_8php.html#a61cdd945f818854c4cea688ae2430713">zot_reply_message_request()</a>, <a class="el" href="zot_8php.html#ae338fcd6db6461a6dde5e4e8f734e0f2">zot_reply_purge()</a>, and <a class="el" href="zot_8php.html#af0864b60cb55a5f70278222f23ed9372">zotinfo()</a>.</p>

</div>
</div>
<a class="anchor" id="ac301c67864917c35922257950ae0f95c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_channel_sync_delivery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deliveries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$deliveries</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>
<dl class="fixme"><dt><b><a class="el" href="fixme.html#_fixme000018">Fixme:</a></b></dt><dd>this will sync red structures (channel, pconfig and abook). Eventually we need to make this application agnostic. </dd></dl>
<dl class="fixme"><dt><b><a class="el" href="fixme.html#_fixme000019">Fixme:</a></b></dt><dd>does not handle sync of del_abconfig </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000018">Todo:</a></b></dt><dd>We also need to import local photos if a custom photo is selected </dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000077">Hooks:</a></b></dt><dd>process_channel_sync_delivery Called when accepting delivery of a 'sync packet' containing structure and table updates from a channel clone.<ul>
<li><em>array</em> <b>channel</b> </li>
<li><em>array</em> <b>data</b> </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e3006e7a456b2175a9badc96bc5176d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_delivery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deliveries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$public</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$request</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$deliveries</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$relay</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$public</td><td>(optional) default false </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$request</td><td>(optional) default false </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>
<dl class="fixme"><dt><b><a class="el" href="fixme.html#_fixme000017">Fixme:</a></b></dt><dd>: Somehow we need to block normal message delivery from our clones, as the delivered message doesn't have ACL information in it as the cloned copy does. That copy will normally arrive first via sync delivery, but this isn't guaranteed. There's a chance the current delivery could take place before the cloned copy arrives hence the item could have the wrong ACL and <em>could</em> be used in subsequent deliveries or access checks. So far all attempts at identifying this situation precisely have caused issues with delivery of relayed comments. </dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000073">Hooks:</a></b></dt><dd>post_local Called when an item has been posted on this machine via mod/item.php (also via API).<ul>
<li><em>array</em> with an item </li>
</ul>
</dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000074">Hooks:</a></b></dt><dd>activity_received Called when an activity (post, comment, like, etc.) has been received from a zot source.<ul>
<li><em>int</em> <b>item_id</b> </li>
<li><em>array</em> <b>item</b> </li>
<li><em>array</em> <b>sender</b> </li>
<li><em>array</em> <b>channel</b> </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Daemon_1_1Externals.html#a0f17d738cc492f5b315f81d1b57660c2">Zotlabs\Daemon\Externals\run()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Onepoll.html#a7c7b5565fadddea5aec83e0555241ad2">Zotlabs\Daemon\Onepoll\run()</a>, and <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="a8eeefdb0dad4c436bea9d1c06c0a7988"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_location_delivery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deliveries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td>an associative array<ul>
<li><em>string</em> <b>hash</b> a xchan_hash </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$deliveries</td><td>(unused) deliveries is irrelevant </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6ae96db8cbbdbb10e6876d206bbf7cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_mail_delivery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deliveries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a57b40669351c9791126b925cb7ef3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_profile_delivery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deliveries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes delivery of profile. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="zot_8php.html#a20750dd2c36961013fd382fb34e1366c" title="Imports a directory profile. ">import_directory_profile()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td>an associative array<ul>
<li><em>string</em> <b>hash</b> a xchan_hash </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$deliveries</td><td>(unused) </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="ab718f7ab0df9c4153037d1a3f2613181"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_rating_delivery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes delivery of rating. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td><ul>
<li><em>string</em> <b>hash</b> a xchan_hash </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="a083aec6c900d244e1bfc1406f9461465"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public_recips </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A public message with no listed recipients can be delivered to anybody who has PERMS_NETWORK for that type of post, PERMS_AUTHED (in-network senders are by definition authenticated) or PERMS_SITE and is one the same site, or PERMS_SPECIFIC and the sender is a contact who is granted permissions via their connection permissions in the address book. Here we take a given message and construct a list of hashes of everybody on the site that we should try and deliver to. Some of these will be rejected, but this gives us a place to start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$msg</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL|array </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a703f528ade8382cf374e4119bd6f7859">allowed_public_recips()</a>.</p>

</div>
</div>
<a class="anchor" id="aad25a3fe0e1566121d6fb8222979bc10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_community_tag </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove community tag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td>an associative array with<ul>
<li><em>string</em> <b>hash</b> a xchan_hash </li>
</ul>
</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>an associative array<ul>
<li><em>int</em> <b>verb</b> </li>
<li><em>int</em> <b>obj_type</b> </li>
<li><em>int</em> <b>mid</b> </li>
</ul>
</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$uid</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#a0e3006e7a456b2175a9badc96bc5176d">process_delivery()</a>.</p>

</div>
</div>
<a class="anchor" id="ab15c04e7e5f44edf45ec50dd7d183254"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sync_locations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$absolute</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronises locations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$absolute</td><td>(optional) default false </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a528e97ca5d69c3b7f35c5d954afde315">import_xchan()</a>, and <a class="el" href="zot_8php.html#a8eeefdb0dad4c436bea9d1c06c0a7988">process_location_delivery()</a>.</p>

</div>
</div>
<a class="anchor" id="adedf8f786f520187ad910183335d9ad8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update_hub_connected </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sitekey</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$hub</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sitekey</td><td>(optional, default empty)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string hubloc_url </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1Receiver.html#acb41e0255a46fd6ab2ecf39d285a727c">Zotlabs\Zot\Receiver\ValidateSender()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ff0d5f1ef6584866fb563d09de87b65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update_imported_item </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tag_delivery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates an imported item. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="items_8php.html#a32cf56cdb2839781bbdf8d9553dbbdac" title="Update a stored item. ">item_store_update()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$item</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$orig</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$uid</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$tag_delivery</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#a0e3006e7a456b2175a9badc96bc5176d">process_delivery()</a>.</p>

</div>
</div>
<a class="anchor" id="ab319d1d9fff9c7775d9daef42d1f33dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update_modtime </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$flags</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hash</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$guid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$addr</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$flags</td><td>(optional) default 0 </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="zot_8php.html#a20750dd2c36961013fd382fb34e1366c">import_directory_profile()</a>, <a class="el" href="zot_8php.html#a528e97ca5d69c3b7f35c5d954afde315">import_xchan()</a>, <a class="el" href="dir__fns_8php.html#acd37b17dce3bdec6d5a6344a20598c1e">local_dir_update()</a>, and <a class="el" href="zot_8php.html#a8eeefdb0dad4c436bea9d1c06c0a7988">process_location_delivery()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f3b61a948ef560ac6eabeb0098a080d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_best_algorithm </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$methods</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Choose best encryption function from those available on both sites. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$methods</td><td>comma separated list of encryption methods </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string first match from our site method preferences <a class="el" href="crypto_8php.html#a37fa92a71939b0b1a74788de7585214e">crypto_methods()</a> array of a method which is common to both sites; or 'aes256cbc' if no matches are found. </dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000071">Hooks:</a></b></dt><dd>zot_best_algorithm Called when negotiating crypto algorithms with remote sites.<ul>
<li><em>string</em> <b>methods</b> - comma separated list of encryption methods</li>
<li><em>string</em> <b>result</b> - the algorithm to return </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a095b39eeb730f699e222dd19d1e6e90e">zot_build_packet()</a>, <a class="el" href="zot_8php.html#a61cdc1ec843663c423ed2d8160ae5aea">zot_fetch()</a>, and <a class="el" href="zot_8php.html#a3401111563050894aecff3139093ae69">zot_reply_pickup()</a>.</p>

</div>
</div>
<a class="anchor" id="a095b39eeb730f699e222dd19d1e6e90e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_build_packet </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code>'notify'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$recipients</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$remote_key</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$methods</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$secret</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$extra</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a zot notification packet. </p>
<p>Builds a zot notification packet that you can either store in the queue with a message array or call zot_zot to immediately zot it to the other side.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$channel</td><td>sender channel structure </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>packet type: one of 'ping', 'pickup', 'purge', 'refresh', 'keychange', 'force_refresh', 'notify', 'auth_check' </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$recipients</td><td>envelope information, array ( 'guid' =&gt; string, 'guid_sig' =&gt; string ); empty for public posts </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$remote_key</td><td>optional public site key of target hub used to encrypt entire packet NOTE: remote_key and encrypted packets are required for 'auth_check' packets, optional for all others </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$methods</td><td>optional comma separated list of encryption methods <a class="el" href="zot_8php.html#a0f3b61a948ef560ac6eabeb0098a080d">zot_best_algorithm()</a> </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$secret</td><td>random string, required for packets which require verification/callback e.g. 'pickup', 'purge', 'notify', 'auth_check'. Packet types 'ping', 'force_refresh', and 'refresh' do not require verification </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$extra</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string json encoded zot packet </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#aa97b33b619dd7132a9274f852af6ceb5">build_sync_packet()</a>, <a class="el" href="classZotlabs_1_1Module_1_1Zping.html#a48907c144234faf5831f1bf097c851cf">Zotlabs\Module\Zping\get()</a>, <a class="el" href="hubloc_8php.html#a4f6f16c9ddfa2fb8a699c1cbdb1b7c20">ping_site()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Ratenotif.html#ac5b2c049b52651de5e49f25305f39859">Zotlabs\Daemon\Ratenotif\run()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Directory.html#a08dd0ed10c3f507324ddb251159223cf">Zotlabs\Daemon\Directory\run()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Notifier.html#a830e15ab6b3a15fb5f9c34d465a46a4a">Zotlabs\Daemon\Notifier\run()</a>, <a class="el" href="classZotlabs_1_1Zot_1_1Auth.html#afb52b437bd15b1b0a7b406bbbbec0bd9">Zotlabs\Zot\Auth\Verify()</a>, and <a class="el" href="zot_8php.html#a61cdd945f818854c4cea688ae2430713">zot_reply_message_request()</a>.</p>

</div>
</div>
<a class="anchor" id="ae26ce9f1ad74139193fb6319beac5fca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_encode_locations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an array with all known distinct hubs for this channel. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="zot_8php.html#ae7cec2b417b5858fd4a41070f843d1d7" title="Given a zot hash, return all distinct hubs. ">zot_get_hublocs()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$channel</td><td>an associative array which must contain<ul>
<li><em>string</em> <b>channel_hash</b> the hash of the channel </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array an array with associative arrays </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#a15ea2cf25dbc7eaf68d32f4e9c6efba1">check_zotinfo()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Notifier.html#a830e15ab6b3a15fb5f9c34d465a46a4a">Zotlabs\Daemon\Notifier\run()</a>, and <a class="el" href="zot_8php.html#af0864b60cb55a5f70278222f23ed9372">zotinfo()</a>.</p>

</div>
</div>
<a class="anchor" id="a61cdc1ec843663c423ed2d8160ae5aea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_fetch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>We received a notification packet (in mod_post) that a message is waiting for us, and we've verified the sender. Now send back a pickup message, using our message tracking ID ($arr['secret']), which we will sign with our site private key. The entire pickup message is encrypted with the remote site's public key. If everything checks out on the remote end, we will receive back a packet containing one or more messages, which will be processed and delivered before this function ultimately returns. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab" title="Process incoming array of messages. ">zot_import()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>decrypted and json decoded notify packet from remote site </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array from <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab" title="Process incoming array of messages. ">zot_import()</a> </dd></dl>

<p>Referenced by <a class="el" href="zot_8php.html#aa454ca2107ab478d0f05924239a7d120">zot_reply_notify()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7cec2b417b5858fd4a41070f843d1d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_get_hublocs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a zot hash, return all distinct hubs. </p>
<p>This function is used in building the zot discovery packet and therefore should only be used by channels which are defined on this hub.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hash</td><td>- xchan_hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array of hubloc (hub location structures)<ul>
<li><b>hubloc_id</b> int</li>
<li><b>hubloc_guid</b> char(191)</li>
<li><b>hubloc_guid_sig</b> text</li>
<li><b>hubloc_hash</b> char(191)</li>
<li><b>hubloc_addr</b> char(191)</li>
<li><b>hubloc_flags</b> int</li>
<li><b>hubloc_status</b> int</li>
<li><b>hubloc_url</b> char(191)</li>
<li><b>hubloc_url_sig</b> text</li>
<li><b>hubloc_host</b> char(191)</li>
<li><b>hubloc_callback</b> char(191)</li>
<li><b>hubloc_connect</b> char(191)</li>
<li><b>hubloc_sitekey</b> text</li>
<li><b>hubloc_updated</b> datetime</li>
<li><b>hubloc_connected</b> datetime </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Module_1_1Fhublocs.html#aca8226b61a3ec3e496b95ed7e963ea83">Zotlabs\Module\Fhublocs\get()</a>, <a class="el" href="zot_8php.html#ac301c67864917c35922257950ae0f95c">process_channel_sync_delivery()</a>, and <a class="el" href="zot_8php.html#ae26ce9f1ad74139193fb6319beac5fca">zot_encode_locations()</a>.</p>

</div>
</div>
<a class="anchor" id="acf10e76aab0953cdd198d51270191c54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_gethub </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$multiple</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up if channel is known and previously verified. </p>
<p>A guid and a url, both signed by the sender, distinguish a known sender at a known location. This function looks these up to see if the channel is known and therefore previously verified. If not, we will need to verify it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>an associative array which must contain:<ul>
<li><em>string</em> <b>guid</b> =&gt; guid of conversant</li>
<li><em>string</em> <b>guid_sig</b> =&gt; guid signed with conversant's private key</li>
<li><em>string</em> <b>url</b> =&gt; URL of the origination hub of this communication</li>
<li><em>string</em> <b>url_sig</b> =&gt; URL signed with conversant's private key </li>
</ul>
</td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$multiple</td><td>(optional) default false</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array|null<ul>
<li>null if site is blacklisted or not found</li>
<li>otherwise an array with an hubloc record </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="import_8php.html#a77e5c2788a512442f9842ac8dec0465b">import_hublocs()</a>, <a class="el" href="classZotlabs_1_1Zot_1_1Receiver.html#acb41e0255a46fd6ab2ecf39d285a727c">Zotlabs\Zot\Receiver\ValidateSender()</a>, <a class="el" href="zot_8php.html#a61cdc1ec843663c423ed2d8160ae5aea">zot_fetch()</a>, and <a class="el" href="zot_8php.html#aeea071f17e306fe3d0c488551906bfab">zot_import()</a>.</p>

</div>
</div>
<a class="anchor" id="aeea071f17e306fe3d0c488551906bfab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_import </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process incoming array of messages. </p>
<p>Process an incoming array of messages which were obtained via pickup, and import, update, delete as directed.</p>
<p>The message types handled here are 'activity' (e.g. posts), 'mail', 'profile', 'location' and 'channel_sync'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>'pickup' structure returned from remote site </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sender_url</td><td>the url specified by the sender in the initial communication. We will verify the sender and url in each returned message structure and also verify that all the messages returned match the site url that we are currently processing.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array Suitable for logging remotely, enumerating the processing results of each message/recipient combination<ul>
<li>[0] =&gt; <em>string</em> $channel_hash</li>
<li>[1] =&gt; <em>string</em> $delivery_status</li>
<li>[2] =&gt; <em>string</em> $address </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Daemon_1_1Deliver.html#a214e2327d61f169f971e4fe3697bc9a7">Zotlabs\Daemon\Deliver\run()</a>, and <a class="el" href="zot_8php.html#a61cdc1ec843663c423ed2d8160ae5aea">zot_fetch()</a>.</p>

</div>
</div>
<a class="anchor" id="ab22d67660702056bf3f4696dcebf5ce7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_new_uid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$channel_nick</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a unique string for use as a zot guid. </p>
<p>Generates a unique string for use as a zot guid using our DNS-based url, the channel nickname and some entropy. The entropy ensures uniqueness against re-installs where the same URL and nickname are chosen.</p>
<dl class="section note"><dt>Note</dt><dd>zot doesn't require this to be unique. Internally we use a whirlpool hash of this guid and the signature of this guid signed with the channel private key. This can be verified and should make the probability of collision of the verified result negligible within the constraints of our immediate universe.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$channel_nick</td><td>a unique nickname of controlling entity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

<p>Referenced by <a class="el" href="channel_8php.html#a345f4c943d84de502ec6e72d2c813945">create_identity()</a>.</p>

</div>
</div>
<a class="anchor" id="a928f5643ca66ae9635d85aeb2be62e03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_process_response </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$outq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called immediately after sending a zot message which is using queue processing. </p>
<p>Updates the queue item according to the response result and logs any information returned to aid communications troubleshooting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hub</td><td>- url of site we just contacted </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>- output of <a class="el" href="network_8php.html#a9129fd55e7fc175b4ea9a195cccc16bc" title="Does a curl post request. ">z_post_url()</a> </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$outq</td><td>- The queue structure attached to this request </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="queue__fn_8php.html#a93ffa5c20234aae207358809972591d1">queue_deliver()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ac30ff51274bf0b6d3eade37972145c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_refresh </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$them</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$channel</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refreshes after permission changed or friending, etc. </p>
<p>The top half of this function is similar to \<a class="el" href="namespaceZotlabs.html">Zotlabs</a>\Zot\Finger::run() and could potentially be consolidated.</p>
<p>zot_refresh is typically invoked when somebody has changed permissions of a channel and they are notified to fetch new permissions via a finger/discovery operation. This may result in a new connection (abook entry) being added to a local channel and it may result in auto-permissions being granted.</p>
<p>Friending in zot is accomplished by sending a refresh packet to a specific channel which indicates a permission change has been made by the sender which affects the target channel. The hub controlling the target channel does targetted discovery (a zot-finger request requesting permissions for the local channel). These are decoded here, and if necessary and abook structure (addressbook) is created to store the permissions assigned to this channel.</p>
<p>Initially these abook structures are created with a 'pending' flag, so that no reverse permissions are implied until this is approved by the owner channel. A channel can also auto-populate permissions in return and send back a refresh packet of its own. This is used by forum and group communication channels so that friending and membership in the channel's "club" is automatic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$them</td><td>=&gt; xchan structure of sender </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$channel</td><td>=&gt; local channel structure of target recipient, required for "friending" operations </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$force</td><td>(optional) default false</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean<ul>
<li><b>true</b> if successful</li>
<li>otherwise <b>false</b> </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Module_1_1Connedit.html#a7a711b28c6bbf17db234921053af0987">Zotlabs\Module\Connedit\get()</a>, <a class="el" href="zot_8php.html#ad149f1e98c0c5b88ff9147e6ee3f330d">import_author_zot()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Onepoll.html#a7c7b5565fadddea5aec83e0555241ad2">Zotlabs\Daemon\Onepoll\run()</a>, and <a class="el" href="zot_8php.html#a42f977190f0ac305fddb406920494f1a">zot_reply_refresh()</a>.</p>

</div>
</div>
<a class="anchor" id="a5bcdfef419b16075a0eca990956223dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_register_hub </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers an unknown hub. </p>
<p>A communication has been received which has an unknown (to us) sender. Perform discovery based on our calculated hash of the sender at the origination address. This will fetch the discovery packet of the sender, which contains the public key we need to verify our guid and url signatures.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$arr</td><td>an associative array which must contain:<ul>
<li><em>string</em> <b>guid</b> =&gt; guid of conversant</li>
<li><em>string</em> <b>guid_sig</b> =&gt; guid signed with conversant's private key</li>
<li><em>string</em> <b>url</b> =&gt; URL of the origination hub of this communication</li>
<li><em>string</em> <b>url_sig</b> =&gt; URL signed with conversant's private key</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array An associative array with<ul>
<li><b>success</b> boolean true or false</li>
<li><b>message</b> (optional) error string only if success is false </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1Receiver.html#acb41e0255a46fd6ab2ecf39d285a727c">Zotlabs\Zot\Receiver\ValidateSender()</a>.</p>

</div>
</div>
<a class="anchor" id="a60d9c66d9f5d62fadf50571b3d6bc0c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_rekey_request </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#ad62908db7d82fa90150ff5e397102790">Zotlabs\Zot\ZotHandler\Rekey()</a>.</p>

</div>
</div>
<a class="anchor" id="a53507a254a401e1319f3c18f5a68afad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_auth_check </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$encrypted_packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000020">Todo:</a></b></dt><dd>This was and should be 10 minutes but my hosting provider has time lag between the DB and the web server. We should probably convert this to webserver time rather than DB time so that the different clocks won't affect it and allow us to keep the time short. </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#a2c79e11f01132a3d4e518fad9de6a807">Zotlabs\Zot\ZotHandler\AuthCheck()</a>.</p>

</div>
</div>
<a class="anchor" id="a61cdd945f818854c4cea688ae2430713"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_message_request </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process a message request. </p>
<p>If a site receives a comment to a post but finds they have no parent to attach it with, they may send a 'request' packet containing the message_id of the missing parent. This is the handler for that packet. We will create a message_list array of the entire conversation starting with the missing parent and invoke delivery to the sender of the packet.</p>
<p>include/deliver.php (for local delivery) and mod/post.php (for web delivery) detect the existence of this 'message_list' at the destination and split it into individual messages which are processed/delivered in order.</p>
<p>Called from mod/post.php</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#a5f2ac6bc00a1836e763551edc18f9668">Zotlabs\Zot\ZotHandler\Request()</a>.</p>

</div>
</div>
<a class="anchor" id="aa454ca2107ab478d0f05924239a7d120"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_notify </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#ad3c7cfbaec92c59a92fd91a2dabf4ea3">Zotlabs\Zot\ZotHandler\Notify()</a>.</p>

</div>
</div>
<a class="anchor" id="a3401111563050894aecff3139093ae69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_pickup </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#aa5ec1a44e6eac8f7051f70bd66a2f425">Zotlabs\Zot\ZotHandler\Pickup()</a>.</p>

</div>
</div>
<a class="anchor" id="af10643d70f8e7fe6518971636aa79b43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_ping </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Useful to get a health check on a remote site. </p>
<p>This will let us know if any important communication details that we may have stored are no longer valid, regardless of xchan details.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="network_8php.html#a2cf8ec3bdf7fbf8886bb572677e245d8">json_return_and_die()</a> </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#a340e77c7bc43cae0ce80a92428d68028">Zotlabs\Zot\ZotHandler\Ping()</a>.</p>

</div>
</div>
<a class="anchor" id="ae338fcd6db6461a6dde5e4e8f734e0f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_purge </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$recipients</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$recipients</td><td>return <a class="el" href="network_8php.html#a2cf8ec3bdf7fbf8886bb572677e245d8">json_return_and_die()</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#a223e4052b5e0bdbb37618cbfc1788e1f">Zotlabs\Zot\ZotHandler\Purge()</a>.</p>

</div>
</div>
<a class="anchor" id="a42f977190f0ac305fddb406920494f1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_reply_refresh </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$recipients</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remote channel info (such as permissions or photo or something) has been updated. Grab a fresh copy and sync it. </p>
<p>The difference between refresh and force_refresh is that force_refresh unconditionally creates a directory update record, even if no changes were detected upon processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sender</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$recipients</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="network_8php.html#a2cf8ec3bdf7fbf8886bb572677e245d8">json_return_and_die()</a> </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Zot_1_1ZotHandler.html#a2e8aa671cd4f67b66bfc705a6f8f2b5b">Zotlabs\Zot\ZotHandler\Refresh()</a>.</p>

</div>
</div>
<a class="anchor" id="a12373a9b4df897b5cbedce6e6572bd34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_site_info </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$channel_key</em> = <code>''</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="zot_8php.html#af0864b60cb55a5f70278222f23ed9372">zotinfo()</a>.</p>

</div>
</div>
<a class="anchor" id="ab3e9b99ddb11353f37f265a05bb42142"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zot_zot </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="network_8php.html#a9129fd55e7fc175b4ea9a195cccc16bc" title="Does a curl post request. ">z_post_url()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$url</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array see <a class="el" href="network_8php.html#a9129fd55e7fc175b4ea9a195cccc16bc" title="Does a curl post request. ">z_post_url()</a> for returned data format </dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Module_1_1Zping.html#a48907c144234faf5831f1bf097c851cf">Zotlabs\Module\Zping\get()</a>, <a class="el" href="hubloc_8php.html#a4f6f16c9ddfa2fb8a699c1cbdb1b7c20">ping_site()</a>, <a class="el" href="queue__fn_8php.html#a93ffa5c20234aae207358809972591d1">queue_deliver()</a>, <a class="el" href="classZotlabs_1_1Daemon_1_1Directory.html#a08dd0ed10c3f507324ddb251159223cf">Zotlabs\Daemon\Directory\run()</a>, <a class="el" href="classZotlabs_1_1Zot_1_1Auth.html#afb52b437bd15b1b0a7b406bbbbec0bd9">Zotlabs\Zot\Auth\Verify()</a>, and <a class="el" href="zot_8php.html#a61cdc1ec843663c423ed2d8160ae5aea">zot_fetch()</a>.</p>

</div>
</div>
<a class="anchor" id="af0864b60cb55a5f70278222f23ed9372"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zotinfo </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$arr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The special address '[system]' will return a system channel if one has been defined, Or the first valid channel we find if there are no system channels.</p>
<p>This is used by magic-auth if we have no prior communications with this site - and returns an identity on this site which we can use to create a valid hub record so that we can exchange signed messages. The precise identity is irrelevant. It's the hub information that we really need at the other end - and this will return it.</p>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000078">Hooks:</a></b></dt><dd>channel_protocols<ul>
<li><em>int</em> <b>channel_id</b> </li>
<li><em>array</em> <b>protocols</b> </li>
</ul>
</dd></dl>
<dl class="hooks"><dt><b><a class="el" href="hooks.html#_hooks000079">Hooks:</a></b></dt><dd>zot_finger Called when a zot-info packet has been requested (this is our webfinger discovery mechanism).<ul>
<li><em>array</em> The final return array </li>
</ul>
</dd></dl>

<p>Referenced by <a class="el" href="classZotlabs_1_1Module_1_1Zfinger.html#a72176c25e6af11e5b4f5855e61eb1905">Zotlabs\Module\Zfinger\init()</a>, and <a class="el" href="classZotlabs_1_1Module_1_1Wfinger.html#a3dc899bf4ff99b18c1488e83385e711b">Zotlabs\Module\Wfinger\init()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

